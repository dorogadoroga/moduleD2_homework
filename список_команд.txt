from news.models import *
user1 = User.objects.create_user(username='Optimus')
user2 = User.objects.create_user(username='Prime')
author1 = Author.objects.create(author=user1)
author2 = Author.objects.create(author=user2)
cat_economics = Category.objects.create(name='economics')
cat_politics = Category.objects.create(name='politics')
cat_technologies = Category.objects.create(name='technologies')
cat_opinions = Category.objects.create(name='opinions')
article1 = Post.objects.create(author=author1, title='Baidu заявила, что её чат-бот Ernie уже превзошёл ChatGPT по некоторым показателям', text='Глава компании заявил, что Ernie 3.5, последняя итерация языковой модели Baidu, превзошла чат-бота OpenAI, построенного на GPT-3.5, по общим возможностям. Также она оказалась лучше версии на базеGPT-4 по нескольким возможностям, специфичным для китайского языка. Он сослался на тесты государственной газеты China Science Daily.')
article2 = Post.objects.create(author=author2, title='Кадры на заказ: как меняется система профессиональной подготовки', text='Новые вызовы экономики ставят вопрос подготовки квалифицированных кадров особенно остро. Развитие системы среднего профессионального образования, в частности запущенный год назад Министерством просвещения России федеральный проект «Профессионалиет», стал одной из ключевых тем на сессиях в рамках XXVI Петербургского международного экономического форума.')
news1 = Post.objects.create(author=author1, is_news=True, title='Курс биткоина превысил 30 тысяч долларов впервые с апреля', text='Курс биткоина на бирже Binance преодолел планку в 30 тысяч долларов впервые за несколько месяцев. За сутки самая популярная в мире криптовалюта подорожала более чем на 11 процентов, свидетельствуют данные торгов. На момент написания материала биткоин оценивался в 31,326 тысячи долларов — это максимум с апреля 2023 года.')
article1.category.add(cat_technologies, cat_economics)
article2.category.add(cat_economics, cat_opinions)
news1.category.add(cat_economics)
comment1 = Comment.objects.create(post=article1, author=user2, text='За нейросетями - будущее')
comment2 = Comment.objects.create(post=article2, author=user1, text='Давно пора')
comment3 = Comment.objects.create(post=news1, author=user2, text='Пора продавать?')
comment4 = Comment.objects.create(post=news1, author=user1, text='Ждем 60 тысяч')
article1.like()
article1.like()
article1.like()
article1.like()
article2.dislike()
article2.like()
news1.like()
news1.like()
comment1.like()
comment1.like()
comment1.like()
comment2.dislike()
comment2.dislike()
comment4.like()
author1.update_rating()
author2.update_rating()
Author.objects.all().order_by('-rating').values('author__username', 'rating')[0]
best_post = Post.objects.all().order_by('-rating')[0]
print('Date: ', best_post.date, 'Author: ', best_post.author.author.username, 'Rating: ', best_post.rating, 'Title: ', best_post.title, 'Text: ', best_post.preview())
Comment.objects.filter(post = best_post).values('date', 'author__username', 'rating','text')